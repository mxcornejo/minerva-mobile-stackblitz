import React from 'react';
import { render } from '@testing-library/react-native';
import Theme from 'react-native-minerva/src/util/Theme';
import Login from '../src/Login';

describe('Test componente <Login />', () => {
    const name = 'Mara Terra';
    const dataLogin = {
        logo: 'combined_miPago_bch_blanco',
        userName: name,
        greeting: `¡Otro saludo, ${name}!`,
        inputDots: {
            length: 5,
            code: [1, 0, 3],
            loading: false,
            onFulfill: jest.fn(),
        },
        keyBoardView: {
            addValue: jest.fn(),
            biometricAvailable: true,
        },
        footerButtons: [
            { title: `NO SOY ${name}`, props: { onPress: () => console.log(`onPress Button NO SOY ${name}`) } },
            { title: 'OLVIDÉ MI PIN', props: { onPress: () => console.log('onPress Button OLVIDÉ MI PIN') } },
        ],
    };
    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <Theme>
                <Login
                    logo={dataLogin?.logo}
                    userName={dataLogin?.userName}
                    inputDots={dataLogin?.inputDots}
                    keyBoardView={dataLogin?.keyBoardView}
                    footerButtons={dataLogin?.footerButtons}
                />
            </Theme>,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería mostrar otro saludo', () => {
        const { getByText } = render(
            <Theme>
                <Login
                    logo={dataLogin?.logo}
                    greeting={dataLogin?.greeting}
                    userName={dataLogin?.userName}
                    inputDots={dataLogin?.inputDots}
                    keyBoardView={dataLogin?.keyBoardView}
                    footerButtons={dataLogin?.footerButtons}
                />
            </Theme>,
        );
        expect(getByText(dataLogin.greeting)).toBeDefined();
    });
});
