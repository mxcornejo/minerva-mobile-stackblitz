import React, { useState, memo, useEffect } from 'react';
import PropTypes from 'prop-types';
import { FlatList } from 'react-native';
import Item from './Components/Item';
import { itemTypes } from './types';

/**
 * Componente Menu con Card.
 *
 * @component
 */
const CardMenu = ({ data, contentContainerStyle }) => {
    const [dataMenu, setDataMenu] = useState(data);
    const renderItemsCard = ({ item, index }) => (
        <Item
            item={item}
            index={index}
            dataMenu={dataMenu}
            setDataMenu={setDataMenu}
        />
    );
    const keyExtractor = (item, index, prefix = 'item') => `${prefix}-${index}`;
    useEffect(() => {
        setDataMenu(data);
    }, [data]);
    return (
        <FlatList
            data={dataMenu}
            renderItem={renderItemsCard}
            contentContainerStyle={contentContainerStyle}
            keyExtractor={keyExtractor}
        />
    );
};

CardMenu.propTypes = {
    /**
     * Arreglo de objectos para configurar los item del CardMenu.
     */
    data: PropTypes.arrayOf(PropTypes.shape(itemTypes)).isRequired,
    /**
     * Estilos del contenedor del flatlist.
     */
    contentContainerStyle: itemTypes.contentContainerStyle,
};
CardMenu.defaultProps = {
    contentContainerStyle: {},
};

export default memo(CardMenu);
