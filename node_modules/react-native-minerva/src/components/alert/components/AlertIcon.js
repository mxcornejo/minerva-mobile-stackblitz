import React, { memo } from 'react';
import PropTypes from 'prop-types';
import { isObject, has } from 'lodash';
import { Icon, HelperStyle } from '../../../index';
import { propTypes, defaultProps } from '../type';
import ALERT_STR from '../AlertStr';

const AlertIcon = ({
    icon,
    iconAccessibilityLabel,
    iconAccessibilityHint,
    neutral,
    activeColor,
}) => {
    const getIconPropsByType = () => {
        const defaultIconProps = {
            success: {
                name: ALERT_STR.success.name,
                accessibilityLabel: ALERT_STR.success.accessibilityLabel,
                style: HelperStyle.success,
            },
            info: {
                name: ALERT_STR.info.name,
                accessibilityLabel: ALERT_STR.info.accessibilityLabel,
                style: HelperStyle.info,
            },
            warning: {
                name: ALERT_STR.warning.name,
                accessibilityLabel: ALERT_STR.warning.accessibilityLabel,
                style: HelperStyle.warning,
            },
            danger: {
                name: ALERT_STR.danger.name,
                accessibilityLabel: ALERT_STR.danger.accessibilityLabel,
                style: HelperStyle.danger,
            },
            neutral: false,
        };
        return defaultIconProps[activeColor];
    };

    const iconProps = getIconPropsByType();
    if (isObject(icon) && has(icon, 'name')) {
        return (
            <Icon
                {...icon}
                style={[neutral && HelperStyle.gray_light, icon?.style]}
            />
        );
    }
    return (
        <Icon
            name={iconProps.name}
            style={iconProps.style}
            accessibilityLabel={
                iconAccessibilityLabel || iconProps.accessibilityLabel
            }
            accessibilityHint={
                iconAccessibilityHint || iconProps.accessibilityLabel
            }
            testID={iconAccessibilityLabel || iconProps.accessibilityLabel}
            accessible
        />
    );
};

AlertIcon.propTypes = {
    icon: propTypes.icon,
    iconAccessibilityLabel: propTypes.iconAccessibilityLabel,
    iconAccessibilityHint: propTypes.iconAccessibilityHint,
    neutral: propTypes.neutral,
    activeColor: PropTypes.string,
};
AlertIcon.defaultProps = {
    icon: defaultProps.icon,
    iconAccessibilityLabel: defaultProps.iconAccessibilityLabel,
    iconAccessibilityHint: defaultProps.iconAccessibilityHint,
    neutral: defaultProps.neutral,
    activeColor: 'success',
};

export default memo(AlertIcon);
