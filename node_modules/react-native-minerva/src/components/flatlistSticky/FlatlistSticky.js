import React, { memo } from 'react';
import { FlatList } from 'react-native';
import { transformData, handlerRenderItem } from './utils';
import { propTypesFlatlistSticky, defaultPropsFlatlistSticky } from './type';

/**
 * Componente listado con elemento flotantes. Extiende de <Flatlist />.
 *
 * @component
 */
const FlatlistSticky = ({
    bounces,
    centerContent,
    contentContainerStyle,
    data,
    dataListHeader,
    error,
    keyboardShouldPersistTaps,
    keyboardVerticalOffset,
    keyExtractor,
    ListEmptyComponent,
    ListErrorComponent,
    ListFooterComponent,
    ListHeaderComponent,
    ListLoadingComponent,
    loading,
    refreshControl,
    renderItem,
    scrollRef,
    stickyHeaderIndices,
}) => (
    <FlatList
        bounces={bounces}
        centerContent={centerContent}
        contentContainerStyle={contentContainerStyle}
        data={transformData({
            data,
            dataListHeader,
            error,
            ListEmptyComponent,
            ListErrorComponent,
            ListLoadingComponent,
            loading,
        })}
        keyboardShouldPersistTaps={keyboardShouldPersistTaps}
        keyboardVerticalOffset={keyboardVerticalOffset}
        keyExtractor={keyExtractor}
        ListEmptyComponent={ListEmptyComponent}
        ListFooterComponent={ListFooterComponent}
        ListHeaderComponent={ListHeaderComponent}
        ref={scrollRef}
        refreshControl={refreshControl}
        renderItem={handlerRenderItem({ renderItem })}
        stickyHeaderIndices={stickyHeaderIndices}
    />
);

FlatlistSticky.propTypes = propTypesFlatlistSticky;
FlatlistSticky.defaultProps = defaultPropsFlatlistSticky;

export default memo(FlatlistSticky);
