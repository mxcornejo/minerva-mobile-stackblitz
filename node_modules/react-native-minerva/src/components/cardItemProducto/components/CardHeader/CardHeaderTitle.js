import React, { memo } from 'react';
import { isObject, get } from 'lodash';
import { HelperStyle, H4 } from '../../../../index';
import Style from '../../style';
import { isTextHeaderWhite } from '../../utils';
import CardNumberMask from './CardNumberMask';
import {
    CardHeaderTitlePropTypes,
    CardHeaderTitleDefaultProps,
} from '../../type';

/**
 * Componente titulo que se muestra area del encabezado del card de Productos.
 * Caso 1, cuando titleCardNumber esta definido mostrar (true/false) el componente para enmascara el numero de la tarjeta.
 * Caso 2, caso contrario renderiza el title en el componente H4.
 *
 * @component
 */
const CardHeaderTitle = ({
    title,
    titleStyle,
    titleNumberOfLines,
    titleCardNumber,
    tipoProducto,
    tipoTarjeta,
}) => {
    const textTitleColorPrincipal = isTextHeaderWhite(tipoProducto, tipoTarjeta)
        ? HelperStyle.gray_dark
        : HelperStyle.white;
    const getTitle = isObject(title) ? title?.text : title;
    const defaultTitleProps = {
        accessibilityLabel: getTitle,
        testID: getTitle,
        numberOfLines: titleNumberOfLines || 1,
        ellipsizeMode: 'tail',
    };
    const getTitleProps = isObject(title)
        ? { ...defaultTitleProps, ...title?.textProps }
        : defaultTitleProps;
    if (titleCardNumber) {
        return (
            <CardNumberMask
                small
                {...getTitleProps}
                style={[
                    textTitleColorPrincipal,
                    get(getTitleProps, 'style', ''),
                ]}
                styleContainer={Style.cardItemHeaderTitle}
            >
                {getTitle}
            </CardNumberMask>
        );
    }
    return (
        <H4
            {...getTitleProps}
            style={[
                Style.cardItemHeaderTitle,
                textTitleColorPrincipal,
                HelperStyle.flx_row,
                HelperStyle.flx_shrink,
                get(getTitleProps, 'style', ''),
                titleStyle,
            ]}
        >
            {getTitle}
        </H4>
    );
};

CardHeaderTitle.propTypes = CardHeaderTitlePropTypes;
CardHeaderTitle.defaultProps = CardHeaderTitleDefaultProps;

export default memo(CardHeaderTitle);
