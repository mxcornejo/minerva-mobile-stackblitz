import React from 'react';
import Images from 'bch-assets';
import { Platform } from 'react-native';
import { render } from '@testing-library/react-native';
import { MainBackground, HelperStyle, Text } from '../../../src/index';

describe('Test componente <MainBackground />', () => {
    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <MainBackground>
                <Text style={HelperStyle.white}>Texto</Text>
            </MainBackground>,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar con correción para Android 7 v24', () => {
        Platform.IOS = 'Android';
        Platform.Version = 24;
        const { toJSON } = render(
            <MainBackground>
                <Text style={HelperStyle.white}>Texto</Text>
            </MainBackground>,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar con imagen de fondo diferente', () => {
        const imageBackground = {
            testID: 'testID',
            source: Images.bg.login,
            style: {
                position: 'absolute',
                width: '100%',
                height: '100%',
                overflow: 'hidden',
                zIndex: 3,
            },
            imageStyle: {
                opacity: 0.1,
                resizeMode: 'cover',
                position: 'absolute',
                height: '100%',
                top: 0,
                left: 0,
            },
        };
        const { getByTestId } = render(
            <MainBackground imageBackground={imageBackground}>
                <Text style={HelperStyle.white}>Texto</Text>
            </MainBackground>,
        );
        expect(getByTestId(imageBackground.testID)).toBeDefined();
    });
});
