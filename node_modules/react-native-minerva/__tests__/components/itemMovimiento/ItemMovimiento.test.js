import React from 'react';
import { render } from '@testing-library/react-native';
import ItemMovimiento from '../../../src/components/itemMovimiento/ItemMovimiento';

const mockOnPress = jest.fn();

describe('Test componente <ItemMovimiento />', () => {
    const mediaIcon = {
        iconName: 'icon-bch-home',
        shape: 'square',
    };
    const mediaImage = {
        shape: 'circle',
        imageSource: { uri: 'https://via.placeholder.com/150' },
        testID: 'test_image',
    };
    const props = {
        title: 'Pago',
        detail: 'Voluptate Lorem nisi proident ipsum.',
        amount: {
            text: '$ 100.000',
            showIcon: true,
            isIncomeIcon: true,
        },
        status: {
            text: 'autorizado',
            success: true,
        },
        checkbox: {
            checked: true,
            onPress: mockOnPress,
        },
    };

    const { checkbox, status, title, detail, amount } = props;

    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <ItemMovimiento
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar movimiento con imagen', () => {
        const { getByTestId } = render(
            <ItemMovimiento
                checkBox={checkbox}
                media={mediaImage}
                status={status}
                title={title}
                detail={[detail, detail]}
                amount={amount.text}
            />,
        );
        const elementImage = getByTestId(mediaImage.testID);
        expect(elementImage.props.source).toMatchObject(mediaImage.imageSource);
    });

    test('Debería renderizar version box', () => {
        const { toJSON } = render(
            <ItemMovimiento
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
                box
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar con icono menu isMoreOptions', () => {
        const { toJSON } = render(
            <ItemMovimiento
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
                isMoreOptions
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar box firstItem', () => {
        const { toJSON } = render(
            <ItemMovimiento
                firstItem
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar box lastItem', () => {
        const { toJSON } = render(
            <ItemMovimiento
                lastItem
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar box middleItem', () => {
        const { toJSON } = render(
            <ItemMovimiento
                middleItem
                checkBox={checkbox}
                media={mediaIcon}
                status={status}
                title={title}
                detail={detail}
                amount={amount}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar sin media', () => {
        const { toJSON } = render(
            <ItemMovimiento
                status={status}
                title={title}
                detail={detail}
                amount={amount}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });
});
