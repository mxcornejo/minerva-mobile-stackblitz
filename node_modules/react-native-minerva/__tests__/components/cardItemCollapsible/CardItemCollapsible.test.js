import React from 'react';
import { fireEvent, render } from '@testing-library/react-native';
import { CardItemCollapsible, HelperStyle, Text } from '../../../src/index';

describe('Test componente <CardItemCollapsible />', () => {
    const testID = 'Boton Ver Detalle';
    const headerData = {
        title: 'Resumen de Orden',
        iconName: 'icon-bch-siniestro-ingreso',
        iconLabel: 'icon-bch-siniestro-ingreso',
    };
    const headerDataWithoutIcon = {
        title: 'Resumen de Orden',
    };
    const renderBody = () => <Text>Body Customisable.</Text>;
    const renderCollapsible = () => (
        <Text style={HelperStyle.mb_0}>Collapsible Customisable.</Text>
    );
    const footerData = {
        titleActive: 'Cerrar custom',
        titleInactive: 'Abrir custom',
        accessibilityLabel: testID,
        testID,
        showIcon: true,
    };
    const footerWithoutIconData = {
        titleActive: 'Cerrar custom',
        titleInactive: 'Abrir custom',
        accessibilityLabel: testID,
        testID,
    };

    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <CardItemCollapsible
                headerData={headerData}
                renderBody={renderBody}
                renderCollapsible={renderCollapsible}
                footerData={footerData}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });
    test('Debería renderizar correctamente y no mostrar los iconos', () => {
        const { toJSON } = render(
            <CardItemCollapsible
                headerData={headerDataWithoutIcon}
                renderBody={renderBody}
                renderCollapsible={renderCollapsible}
                footerData={footerWithoutIconData}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });
    test('Debería deberia abrir el collapsibe correctamente', () => {
        const { toJSON, getByTestId } = render(
            <CardItemCollapsible
                headerData={headerData}
                renderBody={renderBody}
                renderCollapsible={renderCollapsible}
                footerData={footerData}
            />,
        );
        const elemCard = getByTestId(footerData.testID);
        fireEvent.press(elemCard);
        expect(toJSON()).toMatchSnapshot();
    });
});
