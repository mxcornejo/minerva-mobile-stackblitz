import React from 'react';
import { render, fireEvent } from '@testing-library/react-native';
import {
    Text,
    HelperStyle,
    Validate,
    PressableOpacity,
} from '../../../src/index';
import buildStyle from '../../../src/components/pressableOpacity/style';

describe('Test componente <PressableOpacity />', () => {
    const mockOnPress = jest.fn();
    test('Debería renderizar correctamente', () => {
        const { toJSON, getByTestId } = render(
            <PressableOpacity testID="PressableOpacity" onPress={mockOnPress}>
                <Text small>Esse reprehenderit</Text>
            </PressableOpacity>,
        );
        const elemBox = getByTestId('PressableOpacity');
        fireEvent.press(elemBox);
        expect(mockOnPress).toHaveBeenCalledTimes(1);
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería tener opacity en pressed', () => {
        const pressed = true;
        const Style = buildStyle({ pressed, HelperStyle, style: {} });
        const opacityStyle = Validate.findStyle(Style, 'opacity');
        expect(opacityStyle).toEqual(expect.objectContaining(HelperStyle.o_60));
    });
});
