import React from 'react';
import { render, fireEvent } from '@testing-library/react-native';
import { CardBeneficio } from '../../../src/index';

describe('Test componente <CardBeneficio />', () => {
    const data = {
        imageSource: { uri: 'https://i.pravatar.cc/300' },
        imageLabel: '30%',
        title: 'Hush Puppies',
        subtitle: '30% de descuento',
        description: 'En toda la tienda generando tu código de descuento',
        testID: 'CardBeneficio',
    };

    const { imageSource, imageLabel, title, subtitle, description, testID } = data;

    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <CardBeneficio
                imageSource={imageSource}
                imageLabel={imageLabel}
                title={title}
                subtitle={subtitle}
                description={description}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería con texto de descripcion en linea', () => {
        const { toJSON } = render(
            <CardBeneficio
                imageSource={imageSource}
                imageLabel={imageLabel}
                title={title}
                subtitle={subtitle}
                description={[description]}
                descriptionInline
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería card tipo horizontal', () => {
        const { toJSON } = render(
            <CardBeneficio
                imageSource={imageSource}
                imageLabel={imageLabel}
                title={title}
                subtitle={subtitle}
                description={description}
                horizontal
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería llamar a la acción del card', () => {
        const mockOnPress = jest.fn();
        const { getByTestId } = render(
            <CardBeneficio
                imageSource={imageSource}
                imageLabel={imageLabel}
                title={title}
                subtitle={subtitle}
                description={description}
                horizontal
                testID={testID}
                onPress={mockOnPress}
            />,
        );
        const elemCard = getByTestId(testID);
        fireEvent.press(elemCard);
        expect(mockOnPress).toHaveBeenCalledTimes(1);
    });
});
