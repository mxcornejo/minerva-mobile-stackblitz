import React from 'react';
import { render } from '@testing-library/react-native';
import { FlatlistSticky, Text, View } from '../../../src/index';

describe('Test componente <FlatlistSticky />', () => {
    const testIDCustomComponent = 'IDcustomComponent';
    const renderComponent = () => <View testID={testIDCustomComponent} />;
    const data = [
        {
            name: 'Marissa Pugh',
        },
        {
            name: 'Daniels Smith',
        },
    ];
    const renderCustom = () => <Text>Adipisicing laboris eiusmod</Text>;
    const dataListHeader = [{ component: renderCustom }];
    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(
            <FlatlistSticky
                stickyHeaderIndices={[1]}
                data={data}
                ListEmptyComponent={renderCustom}
                renderItem={renderCustom}
                dataListHeader={dataListHeader}
                ListFooterComponent={renderCustom}
            />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar con estado loading', () => {
        const { getByTestId } = render(
            <FlatlistSticky
                stickyHeaderIndices={[1]}
                data={data}
                renderItem={renderCustom}
                loading
                ListLoadingComponent={renderComponent}
            />,
        );
        expect(getByTestId(testIDCustomComponent)).toBeDefined();
    });

    test('Debería renderizar con estado error', () => {
        const { getByTestId } = render(
            <FlatlistSticky
                stickyHeaderIndices={[1]}
                data={data}
                renderItem={renderCustom}
                error
                ListErrorComponent={renderComponent}
            />,
        );
        expect(getByTestId(testIDCustomComponent)).toBeDefined();
    });

    test('Debería renderizar con estado vació', () => {
        const { getByTestId } = render(
            <FlatlistSticky
                data={[]}
                renderItem={renderCustom}
                ListEmptyComponent={renderComponent}
            />,
        );
        expect(getByTestId(testIDCustomComponent)).toBeDefined();
    });
});
