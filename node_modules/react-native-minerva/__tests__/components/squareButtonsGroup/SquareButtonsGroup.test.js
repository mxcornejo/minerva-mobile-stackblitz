import React from 'react';
import { fireEvent, render } from '@testing-library/react-native';
import SquareButtonsGroup from '../../../src/components/SquareButtonsGroup/SquareButtonsGroup';
import { HelperStyle } from '../../../src';

describe('Test <SquareButtonsGroup />', () => {
    const mockOnPress = jest.fn();
    const items = [
        {
            iconName: 'icon-bch-seguro-hogar',
            iconStyle: HelperStyle.primary,
            text: 'Uno-1',
            id: 0,
            selected: true,
            testID: 'btn_1',
            accessibilityLabel: 'label',
            accessibilityHint: 'hint',
            onPress: mockOnPress,
        },
        {
            iconName: 'icon-bch-logo-teleton',
            iconStyle: HelperStyle.danger,
            text: 'Dos-2',
            id: 1,
            testID: 'btn_2',
            accessibilityLabel: 'label',
            accessibilityHint: 'hint',
            onPress: mockOnPress,
        },
        {
            iconName: 'icon-bch-home',
            iconStyle: HelperStyle.yellow,
            text: 'Tres-3',
            id: 2,
            accessibilityLabel: 'label',
            accessibilityHint: 'hint',
            onPress: mockOnPress,
        },
        {
            iconName: 'icon-bch-logo-teleton',
            iconStyle: HelperStyle.success,
            text: 'Cuatro-4',
            id: 3,
            accessibilityLabel: 'label',
            accessibilityHint: 'hint',
            onPress: mockOnPress,
        },
        {
            iconName: 'icon-bch-dog',
            iconStyle: HelperStyle.danger,
            text: 'Cinco-5',
            id: 4,
            accessibilityLabel: 'label',
            accessibilityHint: 'hint',
            onPress: mockOnPress,
        },
    ];

    test('Debería renderizar correctamente', () => {
        const { toJSON } = render(<SquareButtonsGroup items={items} />);
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería renderizar los textos dentro de la card', () => {
        const { toJSON } = render(
            <SquareButtonsGroup insideText items={items} />,
        );
        expect(toJSON()).toMatchSnapshot();
    });

    test('Debería ejecutar acción del card', () => {
        const { getByTestId } = render(
            <SquareButtonsGroup insideText items={items} />,
        );
        const SquareButton1 = getByTestId(items[0].testID);
        fireEvent.press(SquareButton1);
        expect(mockOnPress).toHaveBeenCalledTimes(1);
        expect(SquareButton1).toBeDefined();
    });
});
